(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91044,e=>{"use strict";var r=e.i(45366),t=e.i(23448),l=e.i(55041);e.s(["useClientPanel",0,()=>{let{user:e}=(0,l.useAuth)(),[a,n]=(0,r.useState)(null),[s,o]=(0,r.useState)([]),[i,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!e){n(null),o([]),u(!1);return}c()},[e?.id]);let c=async()=>{if(e){u(!0);try{console.log("useClientPanel: loading for user",e.id,e.email);let[r,l]=await Promise.all([t.supabase.rpc("get_my_panel_client"),t.supabase.rpc("get_my_view_grants")]);if(console.log("useClientPanel: pcRes (from RPC)",r),console.log("useClientPanel: pcRes.data",r.data),console.log("useClientPanel: pcRes.error",r.error),console.log("useClientPanel: grantsRes",l),console.log("useClientPanel: grantsRes.data",l.data),console.log("useClientPanel: grantsRes.error",l.error),r.error){console.error("useClientPanel: get_my_panel_client error",r.error),console.error("useClientPanel: error details",JSON.stringify(r.error,null,2)),n(null),o([]);return}let a=Array.isArray(r.data)&&r.data.length>0?r.data[0]:null;if(n(a?{id:a.id,marketing_client_id:a.marketing_client_id}:null),!a)return void o([]);if(l.error){console.error("useClientPanel: get_my_view_grants error",l.error),o([]);return}let s=Array.isArray(l.data)?l.data:[];o(s.filter(e=>["documents","courses","marketing","data","projects"].includes(e)))}catch(e){console.error("useClientPanel load error:",e),n(null),o([])}finally{u(!1)}}};return{panelClient:a,viewGrants:s,loading:i,reload:c}}])},31394,e=>{"use strict";var r=e.i(29883),t=e.i(45366),l=e.i(7495),a=e.i(91044),n=e.i(60564);let s={documents:{path:"documents",label:"Umowy i dokumenty"},courses:{path:"courses",label:"Kursy"},marketing:{path:"marketing",label:"Marketing"},data:{path:"data",label:"Dane"},projects:{path:"projects",label:"Projekty"}},o=["data","documents","courses","marketing","projects"];function i(){let e=(0,l.useRouter)(),{panelClient:i,viewGrants:u,loading:c}=(0,a.useClientPanel)();return(0,t.useEffect)(()=>{if(!c){if(!i||0===u.length)return void e.replace("/panel/data");if(u.length>0){let r=s[o.filter(e=>u.includes(e))[0]];r&&e.replace(`/panel/${r.path}`)}}},[c,i,u,e]),(0,r.jsx)(n.LoadingState,{variant:"fullscreen",label:"Ładowanie panelu…"})}e.s(["default",()=>i])}]);