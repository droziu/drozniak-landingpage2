module.exports=[54166,a=>{"use strict";var b=a.i(70994),c=a.i(96872),d=a.i(64736);a.s(["useClientPanel",0,()=>{let{user:a}=(0,d.useAuth)(),[e,f]=(0,b.useState)(null),[g,h]=(0,b.useState)([]),[i,j]=(0,b.useState)(!0);(0,b.useEffect)(()=>{if(!a){f(null),h([]),j(!1);return}k()},[a?.id]);let k=async()=>{if(a){j(!0);try{console.log("useClientPanel: loading for user",a.id,a.email);let[b,d]=await Promise.all([c.supabase.rpc("get_my_panel_client"),c.supabase.rpc("get_my_view_grants")]);if(console.log("useClientPanel: pcRes (from RPC)",b),console.log("useClientPanel: pcRes.data",b.data),console.log("useClientPanel: pcRes.error",b.error),console.log("useClientPanel: grantsRes",d),console.log("useClientPanel: grantsRes.data",d.data),console.log("useClientPanel: grantsRes.error",d.error),b.error){console.error("useClientPanel: get_my_panel_client error",b.error),console.error("useClientPanel: error details",JSON.stringify(b.error,null,2)),f(null),h([]);return}let e=Array.isArray(b.data)&&b.data.length>0?b.data[0]:null;if(f(e?{id:e.id,marketing_client_id:e.marketing_client_id}:null),!e)return void h([]);if(d.error){console.error("useClientPanel: get_my_view_grants error",d.error),h([]);return}let g=Array.isArray(d.data)?d.data:[];h(g.filter(a=>["documents","courses","marketing","data","projects"].includes(a)))}catch(a){console.error("useClientPanel load error:",a),f(null),h([])}finally{j(!1)}}};return{panelClient:e,viewGrants:g,loading:i,reload:k}}])},91876,a=>{"use strict";var b=a.i(73058),c=a.i(70994),d=a.i(65331),e=a.i(54166),f=a.i(55364);let g={documents:{path:"documents",label:"Umowy i dokumenty"},courses:{path:"courses",label:"Kursy"},marketing:{path:"marketing",label:"Marketing"},data:{path:"data",label:"Dane"},projects:{path:"projects",label:"Projekty"}},h=["data","documents","courses","marketing","projects"];function i(){let a=(0,d.useRouter)(),{panelClient:i,viewGrants:j,loading:k}=(0,e.useClientPanel)();return(0,c.useEffect)(()=>{if(!k){if(!i||0===j.length)return void a.replace("/panel/data");if(j.length>0){let b=g[h.filter(a=>j.includes(a))[0]];b&&a.replace(`/panel/${b.path}`)}}},[k,i,j,a]),(0,b.jsx)(f.LoadingState,{variant:"fullscreen",label:"Ładowanie panelu…"})}a.s(["default",()=>i])}];

//# sourceMappingURL=strony_www_drozniak-landingpage_app_0eb3e588._.js.map