module.exports=[34025,a=>{"use strict";var b=a.i(73058),c=a.i(70994),d=a.i(96872),e=a.i(51789),f=a.i(55364),g=a.i(74826),h=a.i(79793),i=a.i(9116),j=a.i(90520);function k({params:a}){let[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null);(0,c.useEffect)(()=>{a.then(a=>{l(a),n(a.token)})},[a]);let[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)({variant:"1",startDate:"",companyName:"",companyNip:"",companyAddress:"",companyEmail:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",acceptTerms:!1,acceptPrivacy:!1}),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)({isOpen:!1,title:"",message:"",type:"info"});(0,c.useEffect)(()=>{m&&I()},[m]);let I=async()=>{if(m){p(!0),F(null);try{let{data:a,error:b}=await d.supabase.from("proposal_access_links").select("id, proposal_id, expires_at").eq("token",m).eq("status","active").single();if(b||!a){F("Link jest nieprawidłowy lub został unieważniony."),p(!1);return}if(a.expires_at&&new Date(a.expires_at)<new Date){F("Link wygasł."),p(!1);return}v(a);let{data:c,error:e}=await d.supabase.from("proposals").select("id, title, status, valid_until").eq("id",a.proposal_id).single();if(e||!c){F("Nie znaleziono oferty."),p(!1);return}r(c);let{data:f,error:g}=await d.supabase.from("proposal_versions").select("id, version_number, content").eq("proposal_id",c.id).order("version_number",{ascending:!1}).limit(1).single();if(g||!f){F("Nie znaleziono wersji oferty."),p(!1);return}t(f);try{await d.supabase.rpc("track_proposal_view",{proposal_uuid:c.id,access_token:m,metadata_json:{user_agent:"",referer:null,timestamp:new Date().toISOString()}})}catch(a){console.warn("Błąd trackingu:",a)}}catch(a){console.error("Błąd ładowania oferty:",a),F("Nie udało się załadować oferty.")}finally{p(!1)}}},J=async()=>{if(m&&q&&s){if(!A.acceptTerms||!A.acceptPrivacy)return void H({isOpen:!0,title:"Błąd",message:"Musisz zaakceptować zakres i warunki oferty oraz politykę prywatności.",type:"error"});if(!A.companyName||!A.companyEmail||!A.contactName||!A.contactEmail)return void H({isOpen:!0,title:"Błąd",message:"Proszę wypełnić wszystkie obowiązkowe pola (nazwa firmy, email firmy, osoba kontaktowa, email kontaktowy).",type:"error"});x(!0);try{let a=JSON.stringify({variant:A.variant,startDate:A.startDate||null,company:{name:A.companyName,nip:A.companyNip||null,address:A.companyAddress||null,email:A.companyEmail},contact:{name:A.contactName,phone:A.contactPhone||null,email:A.contactEmail},notes:A.notes||null}),{data:b,error:c}=await d.supabase.rpc("accept_proposal",{proposal_uuid:q.id,access_token:m,user_uuid:null,user_email:A.contactEmail||null,client_comment:a,client_ip:null,client_ua:""});if(c)throw c;H({isOpen:!0,title:"Sukces",message:"Oferta została zaakceptowana. Dziękujemy!",type:"success"}),await I(),z(!1)}catch(a){console.error("Błąd akceptacji oferty:",a),H({isOpen:!0,title:"Błąd",message:"Nie udało się zaakceptować oferty: "+(a.message||"Nieznany błąd"),type:"error"})}finally{x(!1)}}};if(o||!k)return(0,b.jsx)(f.LoadingState,{variant:"fullscreen",label:"Ładowanie oferty…"});if(E||!q||!s)return(0,b.jsx)("div",{className:"min-h-screen bg-[#101820] text-white flex items-center justify-center px-4",children:(0,b.jsxs)("div",{className:"text-center max-w-md",children:[(0,b.jsx)(h.XCircle,{size:64,weight:"thin",className:"mx-auto mb-4 text-red-400"}),(0,b.jsx)("h1",{className:"font-[Montserrat] text-2xl font-bold text-white mb-2",children:"Błąd"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:E||"Nie znaleziono oferty."})]})});let K="accepted"===q.status,L=q.valid_until&&new Date(q.valid_until)<new Date,M=(0,j.useFadeIn)(),N=(0,j.useFadeIn)(),O=(0,j.useFadeIn)();return(0,b.jsxs)("div",{className:"min-h-screen bg-[#101820] text-white",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-[#0a0f14] via-[#0d1217] to-[#101820] pointer-events-none"}),(0,b.jsxs)("div",{className:"container mx-auto px-4 md:px-8 py-8 md:py-12 max-w-4xl relative z-10",children:[(0,b.jsxs)("div",{ref:M.ref,className:`mb-8 ${M.className}`,children:[(0,b.jsx)("h1",{className:"font-[Montserrat] text-3xl md:text-4xl font-bold text-white mb-2",children:q.title}),K&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-400 text-sm mt-2",children:[(0,b.jsx)(g.CheckCircle,{size:20,weight:"bold"}),(0,b.jsx)("span",{children:"Oferta została zaakceptowana"})]}),L&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm mt-2",children:[(0,b.jsx)(h.XCircle,{size:20,weight:"bold"}),(0,b.jsx)("span",{children:"Oferta wygasła"})]})]}),(0,b.jsx)("div",{ref:N.ref,className:`space-y-8 mb-8 ${N.className}`,children:s.content.sections.map((a,c)=>(0,b.jsxs)("div",{className:"bg-gradient-to-br from-white/5 to-white/[0.02] rounded-lg p-6 md:p-8 border border-white/10 hover:border-[#fee715]/20 transition-all duration-300 shadow-lg",children:[(0,b.jsx)("h2",{className:"font-[Montserrat] text-xl font-bold text-white mb-4",children:a.title}),"text"===a.type&&(0,b.jsx)("div",{className:"text-gray-300 leading-relaxed whitespace-pre-line",children:a.content}),"list"===a.type&&(0,b.jsx)("ul",{className:"space-y-2",children:(a.items||[]).map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2 text-gray-300",children:[(0,b.jsx)("span",{className:"text-[#fee715] mt-1",children:"•"}),(0,b.jsx)("span",{children:a})]},c))}),"pricing"===a.type&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"text-gray-300 leading-relaxed whitespace-pre-line",children:a.content}),void 0!==a.price&&a.price>0&&(0,b.jsx)("div",{className:"pt-4 border-t border-white/10",children:(0,b.jsx)("div",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-[#fee715] to-[#00C9A7] bg-clip-text text-transparent",children:a.price.toLocaleString("pl-PL",{style:"currency",currency:"PLN"})})})]})]},c))}),!K&&!L&&(0,b.jsxs)("div",{ref:O.ref,className:`bg-gradient-to-br from-white/5 to-white/[0.02] rounded-xl p-6 md:p-8 border border-white/10 shadow-lg ${O.className}`,children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h3",{className:"font-[Montserrat] text-2xl md:text-3xl font-bold text-white mb-2",children:"Jak zaakceptować ofertę"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:"Aby zaakceptować ofertę, kliknij przycisk poniżej i wypełnij krótki formularz"})]}),y?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h4",{className:"font-[Montserrat] text-lg font-semibold text-white mb-4",children:"Formularz akceptacji"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Wybór wariantu *"}),(0,b.jsx)("div",{className:"space-y-2",children:["1","2","3"].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg border border-white/10 hover:border-[#fee715]/30 cursor-pointer transition-colors",children:[(0,b.jsx)("input",{type:"radio",name:"variant",value:a,checked:A.variant===a,onChange:a=>B(b=>({...b,variant:a.target.value})),className:"w-4 h-4 text-[#fee715] bg-white/5 border-white/20 focus:ring-[#fee715] focus:ring-2"}),(0,b.jsxs)("span",{className:"text-gray-300",children:["Wariant ",a]})]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferowana data startu (opcjonalnie)"}),(0,b.jsx)("input",{type:"date",value:A.startDate,onChange:a=>B(b=>({...b,startDate:a.target.value})),className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-white text-sm focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]"})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-white/10",children:[(0,b.jsx)("h5",{className:"font-[Montserrat] text-base font-semibold text-white mb-4",children:"Dane firmy do faktury"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nazwa firmy *"}),(0,b.jsx)("input",{type:"text",value:A.companyName,onChange:a=>B(b=>({...b,companyName:a.target.value})),required:!0,className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]",placeholder:"Nazwa firmy"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"NIP (opcjonalnie)"}),(0,b.jsx)("input",{type:"text",value:A.companyNip,onChange:a=>B(b=>({...b,companyNip:a.target.value})),className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]",placeholder:"NIP"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"E-mail do faktur *"}),(0,b.jsx)("input",{type:"email",value:A.companyEmail,onChange:a=>B(b=>({...b,companyEmail:a.target.value})),required:!0,className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]",placeholder:"email@firma.pl"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Adres (opcjonalnie)"}),(0,b.jsx)("textarea",{value:A.companyAddress,onChange:a=>B(b=>({...b,companyAddress:a.target.value})),rows:2,className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715] resize-none",placeholder:"Adres firmy"})]})]})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-white/10",children:[(0,b.jsx)("h5",{className:"font-[Montserrat] text-base font-semibold text-white mb-4",children:"Osoba kontaktowa"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Imię i nazwisko *"}),(0,b.jsx)("input",{type:"text",value:A.contactName,onChange:a=>B(b=>({...b,contactName:a.target.value})),required:!0,className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]",placeholder:"Imię i nazwisko"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Telefon (opcjonalnie)"}),(0,b.jsx)("input",{type:"tel",value:A.contactPhone,onChange:a=>B(b=>({...b,contactPhone:a.target.value})),className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]",placeholder:"+48 123 456 789"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"E-mail *"}),(0,b.jsx)("input",{type:"email",value:A.contactEmail,onChange:a=>B(b=>({...b,contactEmail:a.target.value})),required:!0,className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]",placeholder:"email@firma.pl"})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Uwagi / dodatkowe informacje (opcjonalnie)"}),(0,b.jsx)("textarea",{value:A.notes,onChange:a=>B(b=>({...b,notes:a.target.value})),rows:4,className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715] resize-none",placeholder:"Twoje uwagi lub pytania..."})]}),(0,b.jsxs)("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[(0,b.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:A.acceptTerms,onChange:a=>B(b=>({...b,acceptTerms:a.target.checked})),required:!0,className:"mt-1 w-4 h-4 text-[#fee715] bg-white/5 border-white/20 rounded focus:ring-[#fee715] focus:ring-2"}),(0,b.jsx)("span",{className:"text-gray-300 text-sm",children:"Akceptuję zakres i warunki oferty *"})]}),(0,b.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:A.acceptPrivacy,onChange:a=>B(b=>({...b,acceptPrivacy:a.target.checked})),required:!0,className:"mt-1 w-4 h-4 text-[#fee715] bg-white/5 border-white/20 rounded focus:ring-[#fee715] focus:ring-2"}),(0,b.jsx)("span",{className:"text-gray-300 text-sm",children:"Akceptuję politykę prywatności *"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsxs)("button",{onClick:J,disabled:w||!A.acceptTerms||!A.acceptPrivacy,className:"flex-1 px-6 py-3 bg-gradient-to-r from-[#fee715] to-[#00C9A7] text-[#101820] font-[Montserrat] font-bold rounded-xl hover:shadow-lg hover:shadow-[#fee715]/40 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,b.jsx)(g.CheckCircle,{size:20,weight:"bold"}),w?"Akceptowanie…":"Akceptuję ofertę"]}),(0,b.jsx)("button",{onClick:()=>z(!1),className:"px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-gray-300 hover:bg-white/10 hover:border-[#fee715]/30 transition-all duration-300 text-sm",children:"Anuluj"})]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("button",{onClick:()=>z(!0),className:"w-full px-8 py-4 bg-gradient-to-r from-[#fee715] to-[#00C9A7] text-[#101820] font-[Montserrat] font-bold rounded-xl hover:shadow-xl hover:shadow-[#fee715]/40 transition-all duration-300 flex items-center justify-center gap-2 text-lg",children:[(0,b.jsx)(g.CheckCircle,{size:24,weight:"bold"}),"Akceptuję ofertę"]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsxs)("button",{onClick:()=>window.location.href="mailto:stanislaw@drozniak.pl?subject=Pytańie dotyczące oferty",className:"flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-gray-300 hover:bg-white/10 hover:border-[#fee715]/30 transition-all duration-300 flex items-center justify-center gap-2 text-sm",children:[(0,b.jsx)(i.Envelope,{size:18,weight:"regular"}),"Mam pytania"]}),(0,b.jsx)("a",{href:"mailto:stanislaw@drozniak.pl?subject=Akceptacja oferty",className:"text-gray-400 text-xs hover:text-[#fee715] transition-colors self-center",children:"Wolisz mail?"})]})]})]}),K&&(0,b.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-6 border border-green-500/30 text-center",children:[(0,b.jsx)(g.CheckCircle,{size:48,weight:"bold",className:"mx-auto mb-4 text-green-400"}),(0,b.jsx)("h3",{className:"font-[Montserrat] text-xl font-bold text-white mb-2",children:"Oferta została zaakceptowana"}),(0,b.jsx)("p",{className:"text-gray-300 text-sm",children:"Dziękujemy za akceptację oferty. Skontaktujemy się z Tobą w najbliższym czasie."})]}),L&&(0,b.jsxs)("div",{className:"bg-gray-500/10 rounded-lg p-6 border border-gray-500/30 text-center",children:[(0,b.jsx)(h.XCircle,{size:48,weight:"bold",className:"mx-auto mb-4 text-gray-400"}),(0,b.jsx)("h3",{className:"font-[Montserrat] text-xl font-bold text-white mb-2",children:"Oferta wygasła"}),(0,b.jsx)("p",{className:"text-gray-300 text-sm",children:"Ta oferta nie jest już aktualna. Skontaktuj się z nami, aby otrzymać aktualną ofertę."})]}),(0,b.jsx)(e.AlertModal,{isOpen:G.isOpen,title:G.title,message:G.message,type:G.type,onClose:()=>H(a=>({...a,isOpen:!1}))})]})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=strony_www_drozniak-landingpage_app_p_%5Btoken%5D_page_tsx_df051f4b._.js.map