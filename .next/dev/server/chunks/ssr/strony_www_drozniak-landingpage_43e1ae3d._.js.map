{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanislawdrozniak/strony_www/drozniak-landingpage/lib/supabase-client.ts"],"sourcesContent":["'use client';\n\nimport { createClient } from '@supabase/supabase-js';\n\n// W Next.js zmienne środowiskowe dla klienta MUSZĄ mieć prefix NEXT_PUBLIC_\n// Dla kompatybilności wstecznej sprawdzamy też VITE_ (ale tylko jeśli są dostępne)\nconst supabaseUrl = \n  process.env.NEXT_PUBLIC_SUPABASE_URL || \n  (typeof process !== 'undefined' && process.env.VITE_SUPABASE_URL) ||\n  '';\n    \nconst supabaseAnonKey = \n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \n  (typeof process !== 'undefined' && process.env.VITE_SUPABASE_ANON_KEY) ||\n  '';\n\n// Sprawdź czy zmienne środowiskowe są ustawione\nif (!supabaseUrl || !supabaseAnonKey) {\n  const errorMessage = `\n╔══════════════════════════════════════════════════════════════╗\n║  BŁĄD: Brakuje zmiennych środowiskowych Supabase!           ║\n╠══════════════════════════════════════════════════════════════╣\n║  W Next.js zmienne dla klienta MUSZĄ mieć prefix            ║\n║  NEXT_PUBLIC_                                                ║\n║                                                              ║\n║  Dodaj do .env.local:                                        ║\n║                                                              ║\n║  NEXT_PUBLIC_SUPABASE_URL=https://twoj-projekt.supabase.co   ║\n║  NEXT_PUBLIC_SUPABASE_ANON_KEY=twoj-anon-key                ║\n║                                                              ║\n║  LUB zmień istniejące VITE_ na NEXT_PUBLIC_:                ║\n║  VITE_SUPABASE_URL → NEXT_PUBLIC_SUPABASE_URL                ║\n║  VITE_SUPABASE_ANON_KEY → NEXT_PUBLIC_SUPABASE_ANON_KEY     ║\n╚══════════════════════════════════════════════════════════════╝\n  `;\n  console.error(errorMessage);\n  throw new Error('Missing Supabase environment variables. Check console for details.');\n}\n\n// Utwórz klienta Supabase dla Client Components\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIA,4EAA4E;AAC5E,mFAAmF;AACnF,MAAM,cACJ,gFACC,OAAO,YAAY,eAAe,QAAQ,GAAG,CAAC,iBAAiB,IAChE;AAEF,MAAM,kBACJ,wPACC,OAAO,YAAY,eAAe,QAAQ,GAAG,CAAC,sBAAsB,IACrE;AAEF,gDAAgD;AAChD;;AAuBO,MAAM,WAAW,IAAA,gPAAY,EAAC,aAAa"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanislawdrozniak/strony_www/drozniak-landingpage/app/hooks/useAuth.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { User } from '@supabase/supabase-js';\nimport { supabase } from '@/lib/supabase-client';\n\nexport const useAuth = () => {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Sprawdź aktualną sesję\n    supabase.auth.getSession().then(({ data: { session }, error }) => {\n      if (error) {\n        console.error('Błąd pobierania sesji:', error);\n      }\n      console.log('Sesja załadowana:', session?.user?.email || 'brak sesji');\n      setUser(session?.user ?? null);\n      setLoading(false);\n    });\n\n    // Nasłuchuj zmian w autentykacji\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((event, session) => {\n      console.log('Zmiana stanu autentykacji:', event, session?.user?.email || 'brak sesji');\n      setUser(session?.user ?? null);\n      setLoading(false);\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  const signIn = async (email: string, password: string) => {\n    const { data, error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n    return { data, error };\n  };\n\n  const updatePassword = async (newPassword: string) => {\n    const { data, error } = await supabase.auth.updateUser({\n      password: newPassword,\n    });\n    return { data, error };\n  };\n\n  const signOut = async () => {\n    const { error } = await supabase.auth.signOut();\n    return { error };\n  };\n\n  return {\n    user,\n    loading,\n    signIn,\n    signOut,\n    updatePassword,\n  };\n};\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAJA;;;AAMO,MAAM,UAAU;IACrB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,0PAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,0PAAQ,EAAC;IAEvC,IAAA,2PAAS,EAAC;QACR,yBAAyB;QACzB,8KAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE;YAC3D,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,0BAA0B;YAC1C;YACA,QAAQ,GAAG,CAAC,qBAAqB,SAAS,MAAM,SAAS;YACzD,QAAQ,SAAS,QAAQ;YACzB,WAAW;QACb;QAEA,iCAAiC;QACjC,MAAM,EACJ,MAAM,EAAE,YAAY,EAAE,EACvB,GAAG,8KAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,OAAO;YAC1C,QAAQ,GAAG,CAAC,8BAA8B,OAAO,SAAS,MAAM,SAAS;YACzE,QAAQ,SAAS,QAAQ;YACzB,WAAW;QACb;QAEA,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG,EAAE;IAEL,MAAM,SAAS,OAAO,OAAe;QACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8KAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;YAC7D;YACA;QACF;QACA,OAAO;YAAE;YAAM;QAAM;IACvB;IAEA,MAAM,iBAAiB,OAAO;QAC5B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8KAAQ,CAAC,IAAI,CAAC,UAAU,CAAC;YACrD,UAAU;QACZ;QACA,OAAO;YAAE;YAAM;QAAM;IACvB;IAEA,MAAM,UAAU;QACd,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,8KAAQ,CAAC,IAAI,CAAC,OAAO;QAC7C,OAAO;YAAE;QAAM;IACjB;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanislawdrozniak/strony_www/drozniak-landingpage/components/AlertModal.tsx"],"sourcesContent":["import React from 'react';\n\ninterface AlertModalProps {\n  isOpen: boolean;\n  title: string;\n  message: string;\n  buttonText?: string;\n  onClose: () => void;\n  type?: 'success' | 'error' | 'info' | 'warning';\n}\n\nexport const AlertModal: React.FC<AlertModalProps> = ({\n  isOpen,\n  title,\n  message,\n  buttonText = 'OK',\n  onClose,\n  type = 'info',\n}) => {\n  if (!isOpen) return null;\n\n  const typeStyles = {\n    success: {\n      icon: (\n        <svg className=\"w-8 h-8 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n        </svg>\n      ),\n      border: 'border-green-500/50',\n      bg: 'bg-green-500/10',\n    },\n    error: {\n      icon: (\n        <svg className=\"w-8 h-8 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n        </svg>\n      ),\n      border: 'border-red-500/50',\n      bg: 'bg-red-500/10',\n    },\n    info: {\n      icon: (\n        <svg className=\"w-8 h-8 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n        </svg>\n      ),\n      border: 'border-blue-500/50',\n      bg: 'bg-blue-500/10',\n    },\n    warning: {\n      icon: (\n        <svg className=\"w-8 h-8 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n        </svg>\n      ),\n      border: 'border-yellow-500/50',\n      bg: 'bg-yellow-500/10',\n    },\n  };\n\n  const styles = typeStyles[type];\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n      {/* Backdrop */}\n      <div \n        className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\n        onClick={onClose}\n      />\n      \n      {/* Modal */}\n      <div className={`relative bg-gradient-to-br from-[#18232F] to-[#101820] rounded-2xl border-2 ${styles.border} shadow-2xl max-w-md w-full p-6 md:p-8 transform transition-all`}>\n        <div className=\"flex items-start gap-4 mb-6\">\n          <div className=\"flex-shrink-0\">\n            {styles.icon}\n          </div>\n          <div className=\"flex-1\">\n            <h3 className=\"font-[Montserrat] text-2xl font-bold text-white mb-2\">\n              {title}\n            </h3>\n            <p className=\"text-gray-300 leading-relaxed\">\n              {message}\n            </p>\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end\">\n          <button\n            onClick={onClose}\n            className=\"px-6 py-3 bg-gradient-to-r from-[#fee715] to-[#00C9A7] text-[#101820] font-[Montserrat] font-bold rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-[#fee715]/40\"\n          >\n            {buttonText}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n"],"names":[],"mappings":";;;;;;AAWO,MAAM,aAAwC,CAAC,EACpD,MAAM,EACN,KAAK,EACL,OAAO,EACP,aAAa,IAAI,EACjB,OAAO,EACP,OAAO,MAAM,EACd;IACC,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,aAAa;QACjB,SAAS;YACP,oBACE,uRAAC;gBAAI,WAAU;gBAAyB,MAAK;gBAAO,QAAO;gBAAe,SAAQ;0BAChF,cAAA,uRAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAa;oBAAG,GAAE;;;;;;;;;;;YAGzE,QAAQ;YACR,IAAI;QACN;QACA,OAAO;YACL,oBACE,uRAAC;gBAAI,WAAU;gBAAuB,MAAK;gBAAO,QAAO;gBAAe,SAAQ;0BAC9E,cAAA,uRAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAa;oBAAG,GAAE;;;;;;;;;;;YAGzE,QAAQ;YACR,IAAI;QACN;QACA,MAAM;YACJ,oBACE,uRAAC;gBAAI,WAAU;gBAAwB,MAAK;gBAAO,QAAO;gBAAe,SAAQ;0BAC/E,cAAA,uRAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAa;oBAAG,GAAE;;;;;;;;;;;YAGzE,QAAQ;YACR,IAAI;QACN;QACA,SAAS;YACP,oBACE,uRAAC;gBAAI,WAAU;gBAA0B,MAAK;gBAAO,QAAO;gBAAe,SAAQ;0BACjF,cAAA,uRAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAa;oBAAG,GAAE;;;;;;;;;;;YAGzE,QAAQ;YACR,IAAI;QACN;IACF;IAEA,MAAM,SAAS,UAAU,CAAC,KAAK;IAE/B,qBACE,uRAAC;QAAI,WAAU;;0BAEb,uRAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAIX,uRAAC;gBAAI,WAAW,CAAC,4EAA4E,EAAE,OAAO,MAAM,CAAC,+DAA+D,CAAC;;kCAC3K,uRAAC;wBAAI,WAAU;;0CACb,uRAAC;gCAAI,WAAU;0CACZ,OAAO,IAAI;;;;;;0CAEd,uRAAC;gCAAI,WAAU;;kDACb,uRAAC;wCAAG,WAAU;kDACX;;;;;;kDAEH,uRAAC;wCAAE,WAAU;kDACV;;;;;;;;;;;;;;;;;;kCAKP,uRAAC;wBAAI,WAAU;kCACb,cAAA,uRAAC;4BACC,SAAS;4BACT,WAAU;sCAET;;;;;;;;;;;;;;;;;;;;;;;AAMb"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanislawdrozniak/strony_www/drozniak-landingpage/components/LoadingState.tsx"],"sourcesContent":["import React from 'react';\n\ntype Variant = 'fullscreen' | 'block' | 'inline';\ntype SkeletonType = 'cards' | 'rows' | 'table';\n\ninterface LoadingStateProps {\n  variant?: Variant;\n  label?: string;\n  skeleton?: SkeletonType;\n}\n\nconst Spinner: React.FC<{ size?: 'sm' | 'md' | 'lg' }> = ({ size = 'md' }) => {\n  const s = size === 'sm' ? 'w-5 h-5' : size === 'lg' ? 'w-10 h-10' : 'w-8 h-8';\n  return (\n    <div\n      className={`${s} rounded-full border-2 border-white/15 border-t-[#fee715] animate-spin`}\n      role=\"status\"\n      aria-label=\"Ładowanie\"\n    />\n  );\n};\n\nconst SkeletonBar: React.FC<{ className?: string }> = ({ className = '' }) => (\n  <div className={`h-3 bg-white/10 rounded animate-pulse ${className}`} />\n);\n\nconst SkeletonCard: React.FC = () => (\n  <div className=\"bg-white/5 rounded-xl p-5 border border-white/10 animate-pulse\">\n    <div className=\"flex justify-between mb-4\">\n      <SkeletonBar className=\"h-4 w-32\" />\n      <SkeletonBar className=\"h-5 w-16 rounded-lg\" />\n    </div>\n    <SkeletonBar className=\"w-3/4 mb-2\" />\n    <SkeletonBar className=\"w-1/2 mb-4\" />\n    <div className=\"flex gap-2 mt-4 pt-4 border-t border-white/10\">\n      <SkeletonBar className=\"h-8 flex-1 rounded-lg\" />\n      <SkeletonBar className=\"h-8 w-20 rounded-lg\" />\n    </div>\n  </div>\n);\n\nconst CardsSkeleton: React.FC = () => (\n  <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\n    {[1, 2, 3, 4, 5, 6].map((i) => (\n      <SkeletonCard key={i} />\n    ))}\n  </div>\n);\n\nconst RowsSkeleton: React.FC = () => (\n  <div className=\"space-y-3\">\n    {[1, 2, 3, 4, 5].map((i) => (\n      <div key={i} className=\"flex items-center gap-4 py-3\">\n        <SkeletonBar className=\"h-4 flex-1 max-w-[200px]\" />\n        <SkeletonBar className=\"h-4 flex-1 max-w-[120px]\" />\n        <SkeletonBar className=\"h-4 w-24\" />\n      </div>\n    ))}\n  </div>\n);\n\nconst TableSkeleton: React.FC = () => (\n  <div className=\"border border-white/10 rounded-lg overflow-hidden\">\n    <div className=\"flex gap-4 px-3 py-2.5 bg-white/5 border-b border-white/10\">\n      <SkeletonBar className=\"h-3.5 w-24\" />\n      <SkeletonBar className=\"h-3.5 w-20\" />\n      <SkeletonBar className=\"h-3.5 flex-1\" />\n      <SkeletonBar className=\"h-3.5 w-14\" />\n    </div>\n    {[1, 2, 3, 4, 5].map((i) => (\n      <div key={i} className=\"flex gap-4 px-3 py-2.5 border-b border-white/5\">\n        <SkeletonBar className=\"h-4 flex-1 max-w-[180px]\" />\n        <SkeletonBar className=\"h-4 flex-1 max-w-[100px]\" />\n        <SkeletonBar className=\"h-4 flex-1\" />\n        <SkeletonBar className=\"h-4 w-12\" />\n      </div>\n    ))}\n  </div>\n);\n\nexport const LoadingState: React.FC<LoadingStateProps> = ({\n  variant = 'block',\n  label = 'Ładowanie…',\n  skeleton,\n}) => {\n  if (skeleton && variant === 'block') {\n    return (\n      <div className=\"py-4\">\n        {skeleton === 'cards' && <CardsSkeleton />}\n        {skeleton === 'rows' && <RowsSkeleton />}\n        {skeleton === 'table' && <TableSkeleton />}\n      </div>\n    );\n  }\n\n  if (variant === 'fullscreen') {\n    return (\n      <div className=\"min-h-screen bg-[#101820] flex flex-col items-center justify-center gap-4 px-4\">\n        <Spinner size=\"lg\" />\n        <p className=\"text-sm text-gray-400\">{label}</p>\n      </div>\n    );\n  }\n\n  if (variant === 'inline') {\n    return (\n      <div className=\"flex items-center justify-center gap-2 py-4\">\n        <Spinner size=\"sm\" />\n        <span className=\"text-sm text-gray-400\">{label}</span>\n      </div>\n    );\n  }\n\n  // block\n  return (\n    <div className=\"flex flex-col items-center justify-center gap-3 py-12\">\n      <Spinner size=\"md\" />\n      <p className=\"text-sm text-gray-400\">{label}</p>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;;AAWA,MAAM,UAAmD,CAAC,EAAE,OAAO,IAAI,EAAE;IACvE,MAAM,IAAI,SAAS,OAAO,YAAY,SAAS,OAAO,cAAc;IACpE,qBACE,uRAAC;QACC,WAAW,GAAG,EAAE,sEAAsE,CAAC;QACvF,MAAK;QACL,cAAW;;;;;;AAGjB;AAEA,MAAM,cAAgD,CAAC,EAAE,YAAY,EAAE,EAAE,iBACvE,uRAAC;QAAI,WAAW,CAAC,sCAAsC,EAAE,WAAW;;;;;;AAGtE,MAAM,eAAyB,kBAC7B,uRAAC;QAAI,WAAU;;0BACb,uRAAC;gBAAI,WAAU;;kCACb,uRAAC;wBAAY,WAAU;;;;;;kCACvB,uRAAC;wBAAY,WAAU;;;;;;;;;;;;0BAEzB,uRAAC;gBAAY,WAAU;;;;;;0BACvB,uRAAC;gBAAY,WAAU;;;;;;0BACvB,uRAAC;gBAAI,WAAU;;kCACb,uRAAC;wBAAY,WAAU;;;;;;kCACvB,uRAAC;wBAAY,WAAU;;;;;;;;;;;;;;;;;;AAK7B,MAAM,gBAA0B,kBAC9B,uRAAC;QAAI,WAAU;kBACZ;YAAC;YAAG;YAAG;YAAG;YAAG;YAAG;SAAE,CAAC,GAAG,CAAC,CAAC,kBACvB,uRAAC,kBAAkB;;;;;;;;;;AAKzB,MAAM,eAAyB,kBAC7B,uRAAC;QAAI,WAAU;kBACZ;YAAC;YAAG;YAAG;YAAG;YAAG;SAAE,CAAC,GAAG,CAAC,CAAC,kBACpB,uRAAC;gBAAY,WAAU;;kCACrB,uRAAC;wBAAY,WAAU;;;;;;kCACvB,uRAAC;wBAAY,WAAU;;;;;;kCACvB,uRAAC;wBAAY,WAAU;;;;;;;eAHf;;;;;;;;;;AAShB,MAAM,gBAA0B,kBAC9B,uRAAC;QAAI,WAAU;;0BACb,uRAAC;gBAAI,WAAU;;kCACb,uRAAC;wBAAY,WAAU;;;;;;kCACvB,uRAAC;wBAAY,WAAU;;;;;;kCACvB,uRAAC;wBAAY,WAAU;;;;;;kCACvB,uRAAC;wBAAY,WAAU;;;;;;;;;;;;YAExB;gBAAC;gBAAG;gBAAG;gBAAG;gBAAG;aAAE,CAAC,GAAG,CAAC,CAAC,kBACpB,uRAAC;oBAAY,WAAU;;sCACrB,uRAAC;4BAAY,WAAU;;;;;;sCACvB,uRAAC;4BAAY,WAAU;;;;;;sCACvB,uRAAC;4BAAY,WAAU;;;;;;sCACvB,uRAAC;4BAAY,WAAU;;;;;;;mBAJf;;;;;;;;;;;AAUT,MAAM,eAA4C,CAAC,EACxD,UAAU,OAAO,EACjB,QAAQ,YAAY,EACpB,QAAQ,EACT;IACC,IAAI,YAAY,YAAY,SAAS;QACnC,qBACE,uRAAC;YAAI,WAAU;;gBACZ,aAAa,yBAAW,uRAAC;;;;;gBACzB,aAAa,wBAAU,uRAAC;;;;;gBACxB,aAAa,yBAAW,uRAAC;;;;;;;;;;;IAGhC;IAEA,IAAI,YAAY,cAAc;QAC5B,qBACE,uRAAC;YAAI,WAAU;;8BACb,uRAAC;oBAAQ,MAAK;;;;;;8BACd,uRAAC;oBAAE,WAAU;8BAAyB;;;;;;;;;;;;IAG5C;IAEA,IAAI,YAAY,UAAU;QACxB,qBACE,uRAAC;YAAI,WAAU;;8BACb,uRAAC;oBAAQ,MAAK;;;;;;8BACd,uRAAC;oBAAK,WAAU;8BAAyB;;;;;;;;;;;;IAG/C;IAEA,QAAQ;IACR,qBACE,uRAAC;QAAI,WAAU;;0BACb,uRAAC;gBAAQ,MAAK;;;;;;0BACd,uRAAC;gBAAE,WAAU;0BAAyB;;;;;;;;;;;;AAG5C"}},
    {"offset": {"line": 640, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanislawdrozniak/strony_www/drozniak-landingpage/app/profile/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/app/hooks/useAuth';\nimport { supabase } from '@/lib/supabase-client';\nimport { AlertModal } from '@/components/AlertModal';\nimport { LoadingState } from '@/components/LoadingState';\n\ninterface UserProfileData {\n  company_name: string | null;\n  first_name: string | null;\n  last_name: string | null;\n  phone: string | null;\n  notes: string | null;\n  email: string | null;\n  full_name: string | null;\n}\n\nexport default function UserProfilePage() {\n  const { user } = useAuth();\n  const router = useRouter();\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [profileData, setProfileData] = useState<UserProfileData>({\n    company_name: '',\n    first_name: '',\n    last_name: '',\n    phone: '',\n    notes: '',\n    email: '',\n    full_name: '',\n  });\n  const [alertModal, setAlertModal] = useState<{ isOpen: boolean; title: string; message: string; type: 'success' | 'error' | 'info' | 'warning' }>({\n    isOpen: false,\n    title: '',\n    message: '',\n    type: 'info',\n  });\n\n  useEffect(() => {\n    if (user) {\n      // Ustaw email od razu z user.email\n      setProfileData(prev => ({\n        ...prev,\n        email: user.email || '',\n      }));\n      loadProfile();\n    }\n  }, [user]);\n\n  const loadProfile = async () => {\n    if (!user) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', user.id)\n        .single();\n\n      if (error && error.code !== 'PGRST116') { // PGRST116 = no rows returned\n        throw error;\n      }\n\n      // Jeśli profil istnieje, użyj danych z bazy, w przeciwnym razie użyj wartości domyślnych\n      if (data) {\n        setProfileData({\n          company_name: data.company_name || '',\n          first_name: data.first_name || '',\n          last_name: data.last_name || '',\n          phone: data.phone || '',\n          notes: data.notes || '',\n          email: user.email || '', // Zawsze używaj emaila z auth.users\n          full_name: data.full_name || '',\n        });\n      } else {\n        // Jeśli profil nie istnieje, użyj wartości domyślnych\n        setProfileData({\n          company_name: '',\n          first_name: '',\n          last_name: '',\n          phone: '',\n          notes: '',\n          email: user.email || '',\n          full_name: '',\n        });\n      }\n      setLoading(false);\n    } catch (error) {\n      console.error('Błąd ładowania profilu:', error);\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    setSaving(true);\n    try {\n      // Oblicz full_name z first_name i last_name\n      const fullName = [profileData.first_name, profileData.last_name]\n        .filter(Boolean)\n        .join(' ') || null;\n\n      // Użyj upsert zamiast update, żeby tworzyć profil jeśli nie istnieje\n      // UWAGA: email NIE jest zapisywany do profiles - jest tylko w auth.users\n      const { error } = await supabase\n        .from('profiles')\n        .upsert({\n          id: user.id, // Klucz główny\n          company_name: profileData.company_name || null,\n          first_name: profileData.first_name || null,\n          last_name: profileData.last_name || null,\n          phone: profileData.phone || null,\n          notes: profileData.notes || null,\n          full_name: fullName,\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'id' // Konflikt na podstawie id\n        });\n\n      if (error) {\n        console.error('Szczegóły błędu:', error);\n        throw error;\n      }\n\n      setAlertModal({\n        isOpen: true,\n        title: 'Sukces',\n        message: 'Dane zostały zapisane pomyślnie!',\n        type: 'success',\n      });\n    } catch (error: any) {\n      console.error('Błąd zapisywania profilu:', error);\n      const errorMessage = error?.message || 'Wystąpił błąd podczas zapisywania danych. Spróbuj ponownie.';\n      setAlertModal({\n        isOpen: true,\n        title: 'Błąd',\n        message: errorMessage,\n        type: 'error',\n      });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return <LoadingState variant=\"fullscreen\" label=\"Ładowanie profilu…\" />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#101820] text-white\">\n      <div className=\"container mx-auto px-4 py-6 max-w-2xl\">\n        <div className=\"mb-6\">\n          <button\n            onClick={() => router.push('/panel')}\n            className=\"mb-4 flex items-center gap-1.5 text-sm text-gray-400 hover:text-white transition-colors\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n            Powrót do panelu\n          </button>\n          <h1 className=\"font-[Montserrat] text-xl font-bold mb-1\">\n            <span className=\"bg-gradient-to-r from-[#fee715] to-[#00C9A7] bg-clip-text text-transparent\">\n              Mój Profil\n            </span>\n          </h1>\n          <p className=\"text-gray-400 text-sm\">Zarządzaj swoimi danymi</p>\n        </div>\n\n        <form onSubmit={handleSave} className=\"bg-gradient-to-br from-white/5 to-white/3 rounded-xl p-5 border border-white/10\">\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-xs font-medium text-gray-400 mb-1\">Email</label>\n              <input\n                type=\"email\"\n                value={profileData.email || user?.email || ''}\n                disabled\n                readOnly\n                className=\"w-full bg-white/10 border border-white/20 rounded px-3 py-2 text-sm text-gray-400\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs font-medium text-gray-400 mb-1\">Nazwa firmy</label>\n              <input\n                type=\"text\"\n                value={profileData.company_name || ''}\n                onChange={(e) => setProfileData(prev => ({ ...prev, company_name: e.target.value }))}\n                placeholder=\"Nazwa firmy\"\n                className=\"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-sm text-white placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]\"\n              />\n            </div>\n            <div className=\"grid md:grid-cols-2 gap-3\">\n              <div>\n                <label className=\"block text-xs font-medium text-gray-400 mb-1\">Imię</label>\n                <input\n                  type=\"text\"\n                  value={profileData.first_name || ''}\n                  onChange={(e) => setProfileData(prev => ({ ...prev, first_name: e.target.value }))}\n                  placeholder=\"Imię\"\n                  className=\"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-sm text-white placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-gray-400 mb-1\">Nazwisko</label>\n                <input\n                  type=\"text\"\n                  value={profileData.last_name || ''}\n                  onChange={(e) => setProfileData(prev => ({ ...prev, last_name: e.target.value }))}\n                  placeholder=\"Nazwisko\"\n                  className=\"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-sm text-white placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]\"\n                />\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-xs font-medium text-gray-400 mb-1\">Telefon</label>\n              <input\n                type=\"tel\"\n                value={profileData.phone || ''}\n                onChange={(e) => setProfileData(prev => ({ ...prev, phone: e.target.value }))}\n                placeholder=\"Telefon\"\n                className=\"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-sm text-white placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715]\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs font-medium text-gray-400 mb-1\">Notatki / Cele biznesowe</label>\n              <textarea\n                value={profileData.notes || ''}\n                onChange={(e) => setProfileData(prev => ({ ...prev, notes: e.target.value }))}\n                placeholder=\"Notatki...\"\n                rows={4}\n                className=\"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-sm text-white placeholder-gray-500 focus:ring-1 focus:ring-[#fee715] focus:border-[#fee715] resize-none\"\n              />\n            </div>\n            <div className=\"flex justify-end pt-2\">\n              <button\n                type=\"submit\"\n                disabled={saving}\n                className=\"px-4 py-2 bg-[#fee715] text-[#101820] text-sm font-semibold rounded-lg hover:bg-[#fee715]/90 disabled:opacity-50\"\n              >\n                {saving ? (\n                  <span className=\"flex items-center gap-2 text-sm\">\n                    <svg className=\"animate-spin h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Zapisywanie...\n                  </span>\n                ) : (\n                  'Zapisz zmiany'\n                )}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n\n      {/* Modal alertów */}\n      <AlertModal\n        isOpen={alertModal.isOpen}\n        title={alertModal.title}\n        message={alertModal.message}\n        type={alertModal.type}\n        onClose={() => setAlertModal(prev => ({ ...prev, isOpen: false }))}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}